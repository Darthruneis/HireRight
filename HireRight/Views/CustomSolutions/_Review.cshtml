@model CustomSolutionsSecondStepModel

@using (Html.BeginForm("Finish", "CustomSolutions", FormMethod.Post))
{
    <div class="row">
        <div class="col-xs-12">
            <h3>Critical</h3>
        </div>
        @foreach (var category in Model.Categories.Where(x => x.Importance == CategoryImportance.HighImportance))
        {
        <div class="col-xs-6 col-md-4">
            <div>@category.Title&nbsp;<span><i class="glyphicon glyphicon-question-sign categoryDescriptionToggle"></i></span></div>
            <div class="categoryDescription">@category.Description</div>
        </div>
        }
    </div>
    <div class="row">
        <div class="col-xs-12">
            <h3>Nice to Have</h3>
        </div>
        @foreach (var category in Model.Categories.Where(x => x.Importance == CategoryImportance.LowImportance))
        {
            <div class="col-xs-6 col-md-4">
                <div>@category.Title&nbsp;<span><i class="glyphicon glyphicon-question-sign categoryDescriptionToggle"></i></span></div>
                <div class="categoryDescription">@category.Description</div>
            </div>
        }
    </div>

    foreach (var category in Model.Categories)
    {
        @Html.HiddenFor(x => x.Categories[Model.Categories.IndexOf(category)].Id)
        @Html.HiddenFor(x => x.Categories[Model.Categories.IndexOf(category)].Importance)
        @Html.HiddenFor(x => x.Categories[Model.Categories.IndexOf(category)].Title)
    }

    @Html.HiddenFor(x => x.IsGeneralSelected)
    @Html.HiddenFor(x => x.SelectedIndustry)

    @* Hidden fields for everything that was populated in step 1. *@
    @Html.HiddenFor(x => x.PreviousInformation.CompanyName)
    @Html.HiddenFor(x => x.PreviousInformation.Notes)
    @Html.HiddenFor(x => x.PreviousInformation.PositionsToFill)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.RowGuid)

    @Html.HiddenFor(x => x.PreviousInformation.Contact.CellNumber)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.CompanyGuid)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.Email)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.FirstName)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.LastName)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.OfficeNumber)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.IsAdmin)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.IsPrimary)

    @Html.HiddenFor(x => x.PreviousInformation.Contact.Address.City)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.Address.Country)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.Address.PostalCode)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.Address.State)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.Address.StreetAddress)
    @Html.HiddenFor(x => x.PreviousInformation.Contact.Address.UnitNumber)
}

<script>
    $(".categoryDescriptionToggle").on("click", function(e) {
        $(this).closest("row").find(".categoryDescription").toggle();
    })
</script>